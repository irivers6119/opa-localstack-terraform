{"format_version":"1.2","terraform_version":"1.8.1","planned_values":{"root_module":{"resources":[{"address":"aws_instance.web[0]","mode":"managed","type":"aws_instance","name":"web","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-09b4b74c","credit_specification":[],"get_password_data":false,"hibernation":null,"instance_type":"t2.micro","launch_template":[],"source_dest_check":true,"tags":null,"timeouts":null,"user_data_replace_on_change":false,"volume_tags":null},"sensitive_values":{"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[],"network_interface":[],"private_dns_name_options":[],"root_block_device":[],"secondary_private_ips":[],"security_groups":[],"tags_all":{},"vpc_security_group_ids":[]}},{"address":"aws_instance.web[1]","mode":"managed","type":"aws_instance","name":"web","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-09b4b74c","credit_specification":[],"get_password_data":false,"hibernation":null,"instance_type":"t2.micro","launch_template":[],"source_dest_check":true,"tags":null,"timeouts":null,"user_data_replace_on_change":false,"volume_tags":null},"sensitive_values":{"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[],"network_interface":[],"private_dns_name_options":[],"root_block_device":[],"secondary_private_ips":[],"security_groups":[],"tags_all":{},"vpc_security_group_ids":[]}},{"address":"aws_instance.web[2]","mode":"managed","type":"aws_instance","name":"web","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-09b4b74c","credit_specification":[],"get_password_data":false,"hibernation":null,"instance_type":"t2.micro","launch_template":[],"source_dest_check":true,"tags":null,"timeouts":null,"user_data_replace_on_change":false,"volume_tags":null},"sensitive_values":{"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[],"network_interface":[],"private_dns_name_options":[],"root_block_device":[],"secondary_private_ips":[],"security_groups":[],"tags_all":{},"vpc_security_group_ids":[]}},{"address":"aws_s3_bucket.bucket","mode":"managed","type":"aws_s3_bucket","name":"bucket","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acl":"private","bucket":"my-test-bucket","force_destroy":false,"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":"aws:kms"}],"bucket_key_enabled":null}]}],"tags":{"Environment":"Dev","Name":"My test bucket"},"tags_all":{"Environment":"Dev","Name":"My test bucket"},"timeouts":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[],"website":[]}},{"address":"aws_s3_bucket.example","mode":"managed","type":"aws_s3_bucket","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"my-tf-example-bucket","force_destroy":false,"tags":null,"timeouts":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}},{"address":"aws_s3_bucket_acl.example","mode":"managed","type":"aws_s3_bucket_acl","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acl":"public-read","expected_bucket_owner":null},"sensitive_values":{"access_control_policy":[]}},{"address":"aws_s3_bucket_ownership_controls.example","mode":"managed","type":"aws_s3_bucket_ownership_controls","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"rule":[{"object_ownership":"BucketOwnerPreferred"}]},"sensitive_values":{"rule":[{}]}},{"address":"aws_s3_bucket_public_access_block.example","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":false,"block_public_policy":false,"ignore_public_acls":false,"restrict_public_buckets":false},"sensitive_values":{}},{"address":"aws_security_group.ssh","mode":"managed","type":"aws_security_group","name":"ssh","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Allow SSH access","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"ssh","revoke_rules_on_delete":false,"tags":null,"timeouts":null},"sensitive_values":{"egress":[],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags_all":{}}}],"child_modules":[{"resources":[{"address":"module.kms.aws_kms_external_key.this[0]","mode":"managed","type":"aws_kms_external_key","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bypass_policy_lockout_safety_check":false,"deletion_window_in_days":30,"description":"KMS key for encrypted bucket","key_material_base64":null,"multi_region":false,"policy":"{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::000000000000:root\"},\"Resource\":\"*\",\"Sid\":\"Default\"}],\"Version\":\"2012-10-17\"}","tags":null,"valid_to":null},"sensitive_values":{"key_material_base64":true,"tags_all":{}}}],"address":"module.kms"}]}},"resource_changes":[{"address":"aws_instance.web[0]","mode":"managed","type":"aws_instance","name":"web","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-09b4b74c","credit_specification":[],"get_password_data":false,"hibernation":null,"instance_type":"t2.micro","launch_template":[],"source_dest_check":true,"tags":null,"timeouts":null,"user_data_replace_on_change":false,"volume_tags":null},"after_unknown":{"arn":true,"associate_public_ip_address":true,"availability_zone":true,"capacity_reservation_specification":true,"cpu_core_count":true,"cpu_options":true,"cpu_threads_per_core":true,"credit_specification":[],"disable_api_stop":true,"disable_api_termination":true,"ebs_block_device":true,"ebs_optimized":true,"enclave_options":true,"ephemeral_block_device":true,"host_id":true,"host_resource_group_arn":true,"iam_instance_profile":true,"id":true,"instance_initiated_shutdown_behavior":true,"instance_lifecycle":true,"instance_market_options":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"key_name":true,"launch_template":[],"maintenance_options":true,"metadata_options":true,"monitoring":true,"network_interface":true,"outpost_arn":true,"password_data":true,"placement_group":true,"placement_partition_number":true,"primary_network_interface_id":true,"private_dns":true,"private_dns_name_options":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":true,"secondary_private_ips":true,"security_groups":true,"spot_instance_request_id":true,"subnet_id":true,"tags_all":true,"tenancy":true,"user_data":true,"user_data_base64":true,"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[],"network_interface":[],"private_dns_name_options":[],"root_block_device":[],"secondary_private_ips":[],"security_groups":[],"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"aws_instance.web[1]","mode":"managed","type":"aws_instance","name":"web","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-09b4b74c","credit_specification":[],"get_password_data":false,"hibernation":null,"instance_type":"t2.micro","launch_template":[],"source_dest_check":true,"tags":null,"timeouts":null,"user_data_replace_on_change":false,"volume_tags":null},"after_unknown":{"arn":true,"associate_public_ip_address":true,"availability_zone":true,"capacity_reservation_specification":true,"cpu_core_count":true,"cpu_options":true,"cpu_threads_per_core":true,"credit_specification":[],"disable_api_stop":true,"disable_api_termination":true,"ebs_block_device":true,"ebs_optimized":true,"enclave_options":true,"ephemeral_block_device":true,"host_id":true,"host_resource_group_arn":true,"iam_instance_profile":true,"id":true,"instance_initiated_shutdown_behavior":true,"instance_lifecycle":true,"instance_market_options":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"key_name":true,"launch_template":[],"maintenance_options":true,"metadata_options":true,"monitoring":true,"network_interface":true,"outpost_arn":true,"password_data":true,"placement_group":true,"placement_partition_number":true,"primary_network_interface_id":true,"private_dns":true,"private_dns_name_options":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":true,"secondary_private_ips":true,"security_groups":true,"spot_instance_request_id":true,"subnet_id":true,"tags_all":true,"tenancy":true,"user_data":true,"user_data_base64":true,"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[],"network_interface":[],"private_dns_name_options":[],"root_block_device":[],"secondary_private_ips":[],"security_groups":[],"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"aws_instance.web[2]","mode":"managed","type":"aws_instance","name":"web","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-09b4b74c","credit_specification":[],"get_password_data":false,"hibernation":null,"instance_type":"t2.micro","launch_template":[],"source_dest_check":true,"tags":null,"timeouts":null,"user_data_replace_on_change":false,"volume_tags":null},"after_unknown":{"arn":true,"associate_public_ip_address":true,"availability_zone":true,"capacity_reservation_specification":true,"cpu_core_count":true,"cpu_options":true,"cpu_threads_per_core":true,"credit_specification":[],"disable_api_stop":true,"disable_api_termination":true,"ebs_block_device":true,"ebs_optimized":true,"enclave_options":true,"ephemeral_block_device":true,"host_id":true,"host_resource_group_arn":true,"iam_instance_profile":true,"id":true,"instance_initiated_shutdown_behavior":true,"instance_lifecycle":true,"instance_market_options":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"key_name":true,"launch_template":[],"maintenance_options":true,"metadata_options":true,"monitoring":true,"network_interface":true,"outpost_arn":true,"password_data":true,"placement_group":true,"placement_partition_number":true,"primary_network_interface_id":true,"private_dns":true,"private_dns_name_options":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":true,"secondary_private_ips":true,"security_groups":true,"spot_instance_request_id":true,"subnet_id":true,"tags_all":true,"tenancy":true,"user_data":true,"user_data_base64":true,"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[],"network_interface":[],"private_dns_name_options":[],"root_block_device":[],"secondary_private_ips":[],"security_groups":[],"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"aws_s3_bucket.bucket","mode":"managed","type":"aws_s3_bucket","name":"bucket","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"acl":"private","bucket":"my-test-bucket","force_destroy":false,"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":"aws:kms"}],"bucket_key_enabled":null}]}],"tags":{"Environment":"Dev","Name":"My test bucket"},"tags_all":{"Environment":"Dev","Name":"My test bucket"},"timeouts":null},"after_unknown":{"acceleration_status":true,"arn":true,"bucket_domain_name":true,"bucket_prefix":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"region":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":true}]}]}],"tags":{},"tags_all":{},"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[],"website":[]}}},{"address":"aws_s3_bucket.example","mode":"managed","type":"aws_s3_bucket","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bucket":"my-tf-example-bucket","force_destroy":false,"tags":null,"timeouts":null},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket_domain_name":true,"bucket_prefix":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"region":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":true,"tags_all":true,"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}}},{"address":"aws_s3_bucket_acl.example","mode":"managed","type":"aws_s3_bucket_acl","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"acl":"public-read","expected_bucket_owner":null},"after_unknown":{"access_control_policy":true,"bucket":true,"id":true},"before_sensitive":false,"after_sensitive":{"access_control_policy":[]}}},{"address":"aws_s3_bucket_ownership_controls.example","mode":"managed","type":"aws_s3_bucket_ownership_controls","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"rule":[{"object_ownership":"BucketOwnerPreferred"}]},"after_unknown":{"bucket":true,"id":true,"rule":[{}]},"before_sensitive":false,"after_sensitive":{"rule":[{}]}}},{"address":"aws_s3_bucket_public_access_block.example","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_public_acls":false,"block_public_policy":false,"ignore_public_acls":false,"restrict_public_buckets":false},"after_unknown":{"bucket":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_security_group.ssh","mode":"managed","type":"aws_security_group","name":"ssh","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Allow SSH access","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"ssh","revoke_rules_on_delete":false,"tags":null,"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags_all":{}}}},{"address":"module.kms.aws_kms_external_key.this[0]","module_address":"module.kms","mode":"managed","type":"aws_kms_external_key","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bypass_policy_lockout_safety_check":false,"deletion_window_in_days":30,"description":"KMS key for encrypted bucket","key_material_base64":null,"multi_region":false,"policy":"{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::000000000000:root\"},\"Resource\":\"*\",\"Sid\":\"Default\"}],\"Version\":\"2012-10-17\"}","tags":null,"valid_to":null},"after_unknown":{"arn":true,"enabled":true,"expiration_model":true,"id":true,"key_state":true,"key_usage":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"key_material_base64":true,"tags_all":{}}}}],"prior_state":{"format_version":"1.0","terraform_version":"1.8.1","values":{"root_module":{"child_modules":[{"resources":[{"address":"module.kms.data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"000000000000","arn":"arn:aws:iam::000000000000:root","id":"000000000000","user_id":"AKIAIOSFODNN7EXAMPLE"},"sensitive_values":{}},{"address":"module.kms.data.aws_iam_policy_document.this[0]","mode":"data","type":"aws_iam_policy_document","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"1471953111","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Default\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:*\",\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::000000000000:root\"\n      }\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["kms:*"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["arn:aws:iam::000000000000:root"],"type":"AWS"}],"resources":["*"],"sid":"Default"}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[false]}]}},{"address":"module.kms.data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"dns_suffix":"amazonaws.com","id":"aws","partition":"aws","reverse_dns_prefix":"com.amazonaws"},"sensitive_values":{}}],"address":"module.kms"}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","expressions":{"access_key":{"constant_value":"test"},"endpoints":[{"acm":{"constant_value":"http://localhost:4566"},"amplify":{"constant_value":"http://localhost:4566"},"apigateway":{"constant_value":"http://localhost:4566"},"apigatewayv2":{"constant_value":"http://localhost:4566"},"appconfig":{"constant_value":"http://localhost:4566"},"appflow":{"constant_value":"http://localhost:4566"},"applicationautoscaling":{"constant_value":"http://localhost:4566"},"appsync":{"constant_value":"http://localhost:4566"},"athena":{"constant_value":"http://localhost:4566"},"autoscaling":{"constant_value":"http://localhost:4566"},"backup":{"constant_value":"http://localhost:4566"},"batch":{"constant_value":"http://localhost:4566"},"cloudformation":{"constant_value":"http://localhost:4566"},"cloudfront":{"constant_value":"http://localhost:4566"},"cloudsearch":{"constant_value":"http://localhost:4566"},"cloudtrail":{"constant_value":"http://localhost:4566"},"cloudwatch":{"constant_value":"http://localhost:4566"},"cloudwatchlogs":{"constant_value":"http://localhost:4566"},"codecommit":{"constant_value":"http://localhost:4566"},"cognitoidentity":{"constant_value":"http://localhost:4566"},"cognitoidp":{"constant_value":"http://localhost:4566"},"config":{"constant_value":"http://localhost:4566"},"configservice":{"constant_value":"http://localhost:4566"},"costexplorer":{"constant_value":"http://localhost:4566"},"docdb":{"constant_value":"http://localhost:4566"},"dynamodb":{"constant_value":"http://localhost:4566"},"ec2":{"constant_value":"http://localhost:4566"},"ecr":{"constant_value":"http://localhost:4566"},"ecs":{"constant_value":"http://localhost:4566"},"efs":{"constant_value":"http://localhost:4566"},"eks":{"constant_value":"http://localhost:4566"},"elasticache":{"constant_value":"http://localhost:4566"},"elasticbeanstalk":{"constant_value":"http://localhost:4566"},"elasticsearch":{"constant_value":"http://localhost:4566"},"elb":{"constant_value":"http://localhost:4566"},"elbv2":{"constant_value":"http://localhost:4566"},"emr":{"constant_value":"http://localhost:4566"},"es":{"constant_value":"http://localhost:4566"},"events":{"constant_value":"http://localhost:4566"},"firehose":{"constant_value":"http://localhost:4566"},"fis":{"constant_value":"http://localhost:4566"},"glacier":{"constant_value":"http://localhost:4566"},"glue":{"constant_value":"http://localhost:4566"},"iam":{"constant_value":"http://localhost:4566"},"iot":{"constant_value":"http://localhost:4566"},"iotanalytics":{"constant_value":"http://localhost:4566"},"iotevents":{"constant_value":"http://localhost:4566"},"kafka":{"constant_value":"http://localhost:4566"},"keyspaces":{"constant_value":"http://localhost:4566"},"kinesis":{"constant_value":"http://localhost:4566"},"kinesisanalytics":{"constant_value":"http://localhost:4566"},"kinesisanalyticsv2":{"constant_value":"http://localhost:4566"},"kms":{"constant_value":"http://localhost:4566"},"lakeformation":{"constant_value":"http://localhost:4566"},"lambda":{"constant_value":"http://localhost:4566"},"mediaconvert":{"constant_value":"http://localhost:4566"},"mediastore":{"constant_value":"http://localhost:4566"},"mq":{"constant_value":"http://localhost:4566"},"mwaa":{"constant_value":"http://mwaa.localhost.localstack.cloud:4566"},"neptune":{"constant_value":"http://localhost:4566"},"opensearch":{"constant_value":"http://localhost:4566"},"organizations":{"constant_value":"http://localhost:4566"},"qldb":{"constant_value":"http://localhost:4566"},"ram":{"constant_value":"http://localhost:4566"},"rds":{"constant_value":"http://localhost:4566"},"redshift":{"constant_value":"http://localhost:4566"},"redshiftdata":{"constant_value":"http://localhost:4566"},"resourcegroups":{"constant_value":"http://localhost:4566"},"resourcegroupstaggingapi":{"constant_value":"http://localhost:4566"},"route53":{"constant_value":"http://localhost:4566"},"route53domains":{"constant_value":"http://localhost:4566"},"route53resolver":{"constant_value":"http://localhost:4566"},"s3":{"constant_value":"http://s3.localhost.localstack.cloud:4566"},"s3control":{"constant_value":"http://localhost:4566"},"sagemaker":{"constant_value":"http://localhost:4566"},"scheduler":{"constant_value":"http://localhost:4566"},"secretsmanager":{"constant_value":"http://localhost:4566"},"serverlessrepo":{"constant_value":"http://localhost:4566"},"servicediscovery":{"constant_value":"http://localhost:4566"},"ses":{"constant_value":"http://localhost:4566"},"sesv2":{"constant_value":"http://localhost:4566"},"sns":{"constant_value":"http://localhost:4566"},"sqs":{"constant_value":"http://localhost:4566"},"ssm":{"constant_value":"http://localhost:4566"},"stepfunctions":{"constant_value":"http://localhost:4566"},"sts":{"constant_value":"http://localhost:4566"},"swf":{"constant_value":"http://localhost:4566"},"timestreamwrite":{"constant_value":"http://localhost:4566"},"transcribe":{"constant_value":"http://localhost:4566"},"transfer":{"constant_value":"http://localhost:4566"},"waf":{"constant_value":"http://localhost:4566"},"wafv2":{"constant_value":"http://localhost:4566"},"xray":{"constant_value":"http://localhost:4566"}}],"region":{"constant_value":"us-east-1"},"secret_key":{"constant_value":"test"},"skip_credentials_validation":{"constant_value":true},"skip_metadata_api_check":{"constant_value":true},"skip_requesting_account_id":{"constant_value":true}}}},"root_module":{"resources":[{"address":"aws_instance.web","mode":"managed","type":"aws_instance","name":"web","provider_config_key":"aws","expressions":{"ami":{"constant_value":"ami-09b4b74c"},"instance_type":{"constant_value":"t2.micro"},"vpc_security_group_ids":{"references":["aws_security_group.ssh.id","aws_security_group.ssh"]}},"schema_version":1,"count_expression":{"constant_value":3}},{"address":"aws_s3_bucket.bucket","mode":"managed","type":"aws_s3_bucket","name":"bucket","provider_config_key":"aws","expressions":{"acl":{"constant_value":"private"},"bucket":{"constant_value":"my-test-bucket"},"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":{"references":["module.kms.key_arn","module.kms"]},"sse_algorithm":{"constant_value":"aws:kms"}}]}]}],"tags":{"constant_value":{"Environment":"Dev","Name":"My test bucket"}}},"schema_version":0},{"address":"aws_s3_bucket.example","mode":"managed","type":"aws_s3_bucket","name":"example","provider_config_key":"aws","expressions":{"bucket":{"constant_value":"my-tf-example-bucket"}},"schema_version":0},{"address":"aws_s3_bucket_acl.example","mode":"managed","type":"aws_s3_bucket_acl","name":"example","provider_config_key":"aws","expressions":{"acl":{"constant_value":"public-read"},"bucket":{"references":["aws_s3_bucket.example.id","aws_s3_bucket.example"]}},"schema_version":0,"depends_on":["aws_s3_bucket_ownership_controls.example","aws_s3_bucket_public_access_block.example"]},{"address":"aws_s3_bucket_ownership_controls.example","mode":"managed","type":"aws_s3_bucket_ownership_controls","name":"example","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.example.id","aws_s3_bucket.example"]},"rule":[{"object_ownership":{"constant_value":"BucketOwnerPreferred"}}]},"schema_version":0},{"address":"aws_s3_bucket_public_access_block.example","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"example","provider_config_key":"aws","expressions":{"block_public_acls":{"constant_value":false},"block_public_policy":{"constant_value":false},"bucket":{"references":["aws_s3_bucket.example.id","aws_s3_bucket.example"]},"ignore_public_acls":{"constant_value":false},"restrict_public_buckets":{"constant_value":false}},"schema_version":0},{"address":"aws_security_group.ssh","mode":"managed","type":"aws_security_group","name":"ssh","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow SSH access"},"ingress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":22,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":22}]},"name":{"constant_value":"ssh"}},"schema_version":1}],"module_calls":{"kms":{"source":"terraform-aws-modules/kms/aws","expressions":{"aliases":{"constant_value":[]},"aliases_use_name_prefix":{"constant_value":true},"create_external":{"constant_value":true},"description":{"constant_value":"KMS key for encrypted bucket"},"enable_key_rotation":{"constant_value":false},"grants":{"constant_value":{}},"key_administrators":{"constant_value":[]},"key_owners":{"constant_value":[]},"key_usage":{"constant_value":"ENCRYPT_DECRYPT"},"key_users":{"constant_value":[]}},"module":{"outputs":{"aliases":{"expression":{"references":["aws_kms_alias.this"]},"description":"A map of aliases created and their attributes"},"external_key_expiration_model":{"expression":{"references":["aws_kms_external_key.this[0].expiration_model","aws_kms_external_key.this[0]","aws_kms_external_key.this"]},"description":"Whether the key material expires. Empty when pending key material import, otherwise `KEY_MATERIAL_EXPIRES` or `KEY_MATERIAL_DOES_NOT_EXPIRE`"},"external_key_state":{"expression":{"references":["aws_kms_external_key.this[0].key_state","aws_kms_external_key.this[0]","aws_kms_external_key.this"]},"description":"The state of the CMK"},"external_key_usage":{"expression":{"references":["aws_kms_external_key.this[0].key_usage","aws_kms_external_key.this[0]","aws_kms_external_key.this"]},"description":"The cryptographic operations for which you can use the CMK"},"grants":{"expression":{"references":["aws_kms_grant.this"]},"description":"A map of grants created and their attributes"},"key_arn":{"expression":{"references":["aws_kms_key.this[0].arn","aws_kms_key.this[0]","aws_kms_key.this","aws_kms_external_key.this[0].arn","aws_kms_external_key.this[0]","aws_kms_external_key.this"]},"description":"The Amazon Resource Name (ARN) of the key"},"key_id":{"expression":{"references":["aws_kms_key.this[0].key_id","aws_kms_key.this[0]","aws_kms_key.this","aws_kms_external_key.this[0].id","aws_kms_external_key.this[0]","aws_kms_external_key.this"]},"description":"The globally unique identifier for the key"},"key_policy":{"expression":{"references":["aws_kms_key.this[0].policy","aws_kms_key.this[0]","aws_kms_key.this","aws_kms_external_key.this[0].policy","aws_kms_external_key.this[0]","aws_kms_external_key.this"]},"description":"The IAM resource policy set on the key"}},"resources":[{"address":"aws_kms_alias.this","mode":"managed","type":"aws_kms_alias","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["var.aliases_use_name_prefix","each.value.name","each.value"]},"name_prefix":{"references":["var.aliases_use_name_prefix","each.value.name","each.value"]},"target_key_id":{"references":["var.create_external","aws_kms_external_key.this[0].id","aws_kms_external_key.this[0]","aws_kms_external_key.this","aws_kms_key.this[0].key_id","aws_kms_key.this[0]","aws_kms_key.this"]}},"schema_version":0,"for_each_expression":{"references":["local.aliases","var.computed_aliases","var.create"]}},{"address":"aws_kms_external_key.this","mode":"managed","type":"aws_kms_external_key","name":"this","provider_config_key":"aws","expressions":{"bypass_policy_lockout_safety_check":{"references":["var.bypass_policy_lockout_safety_check"]},"deletion_window_in_days":{"references":["var.deletion_window_in_days"]},"description":{"references":["var.description"]},"enabled":{"references":["var.is_enabled"]},"key_material_base64":{"references":["var.key_material_base64"]},"multi_region":{"references":["var.multi_region"]},"policy":{"references":["var.policy","data.aws_iam_policy_document.this[0].json","data.aws_iam_policy_document.this[0]","data.aws_iam_policy_document.this"]},"tags":{"references":["var.tags"]},"valid_to":{"references":["var.valid_to"]}},"schema_version":0,"count_expression":{"references":["var.create","var.create_external"]}},{"address":"aws_kms_grant.this","mode":"managed","type":"aws_kms_grant","name":"this","provider_config_key":"aws","expressions":{"grant_creation_tokens":{"references":["each.value.grant_creation_tokens","each.value"]},"grantee_principal":{"references":["each.value.grantee_principal","each.value"]},"key_id":{"references":["var.create_external","aws_kms_external_key.this[0].id","aws_kms_external_key.this[0]","aws_kms_external_key.this","aws_kms_key.this[0].key_id","aws_kms_key.this[0]","aws_kms_key.this"]},"name":{"references":["each.value.name","each.value","each.key"]},"operations":{"references":["each.value.operations","each.value"]},"retire_on_delete":{"references":["each.value.retire_on_delete","each.value"]},"retiring_principal":{"references":["each.value.retiring_principal","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.grants","var.create"]}},{"address":"aws_kms_key.this","mode":"managed","type":"aws_kms_key","name":"this","provider_config_key":"aws","expressions":{"bypass_policy_lockout_safety_check":{"references":["var.bypass_policy_lockout_safety_check"]},"customer_master_key_spec":{"references":["var.customer_master_key_spec"]},"deletion_window_in_days":{"references":["var.deletion_window_in_days"]},"description":{"references":["var.description"]},"enable_key_rotation":{"references":["var.enable_key_rotation"]},"is_enabled":{"references":["var.is_enabled"]},"key_usage":{"references":["var.key_usage"]},"multi_region":{"references":["var.multi_region"]},"policy":{"references":["var.policy","data.aws_iam_policy_document.this[0].json","data.aws_iam_policy_document.this[0]","data.aws_iam_policy_document.this"]},"tags":{"references":["var.tags"]}},"schema_version":0,"count_expression":{"references":["var.create","var.create_external"]}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_iam_policy_document.this","mode":"data","type":"aws_iam_policy_document","name":"this","provider_config_key":"aws","expressions":{"override_policy_documents":{"references":["var.override_policy_documents"]},"source_policy_documents":{"references":["var.source_policy_documents"]}},"schema_version":0,"count_expression":{"references":["var.create"]}},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_config_key":"aws","schema_version":0}],"variables":{"aliases":{"default":[],"description":"A list of aliases to create. Note - due to the use of `toset()`, values must be static strings and not computed values"},"aliases_use_name_prefix":{"default":false,"description":"Determines whether the alias name is used as a prefix"},"bypass_policy_lockout_safety_check":{"default":null,"description":"A flag to indicate whether to bypass the key policy lockout safety check. Setting this value to true increases the risk that the KMS key becomes unmanageable"},"computed_aliases":{"default":{},"description":"A map of aliases to create. Values provided via the `name` key of the map can be computed from upstream resources"},"create":{"default":true,"description":"Determines whether resources will be created (affects all resources)"},"create_external":{"default":false,"description":"Determines whether an external CMK (externally provided material) will be created or a standard CMK (AWS provided material)"},"customer_master_key_spec":{"default":null,"description":"Specifies whether the key contains a symmetric key or an asymmetric key pair and the encryption algorithms or signing algorithms that the key supports. Valid values: `SYMMETRIC_DEFAULT`, `RSA_2048`, `RSA_3072`, `RSA_4096`, `HMAC_256`, `ECC_NIST_P256`, `ECC_NIST_P384`, `ECC_NIST_P521`, or `ECC_SECG_P256K1`. Defaults to `SYMMETRIC_DEFAULT`"},"deletion_window_in_days":{"default":null,"description":"The waiting period, specified in number of days. After the waiting period ends, AWS KMS deletes the KMS key. If you specify a value, it must be between `7` and `30`, inclusive. If you do not specify a value, it defaults to `30`"},"description":{"default":null,"description":"The description of the key as viewed in AWS console"},"enable_default_policy":{"default":true,"description":"Specifies whether to enable the default key policy. Defaults to `true`"},"enable_key_rotation":{"default":true,"description":"Specifies whether key rotation is enabled. Defaults to `true`"},"enable_route53_dnssec":{"default":false,"description":"Determines whether the KMS policy used for Route53 DNSSEC signing is enabled"},"grants":{"default":{},"description":"A map of grant definitions to create"},"is_enabled":{"default":null,"description":"Specifies whether the key is enabled. Defaults to `true`"},"key_administrators":{"default":[],"description":"A list of IAM ARNs for [key administrators](https://docs.aws.amazon.com/kms/latest/developerguide/key-policy-default.html#key-policy-default-allow-administrators)"},"key_asymmetric_public_encryption_users":{"default":[],"description":"A list of IAM ARNs for [key asymmetric public encryption users](https://docs.aws.amazon.com/kms/latest/developerguide/key-policy-default.html#key-policy-users-crypto)"},"key_asymmetric_sign_verify_users":{"default":[],"description":"A list of IAM ARNs for [key asymmetric sign and verify users](https://docs.aws.amazon.com/kms/latest/developerguide/key-policy-default.html#key-policy-users-crypto)"},"key_hmac_users":{"default":[],"description":"A list of IAM ARNs for [key HMAC users](https://docs.aws.amazon.com/kms/latest/developerguide/key-policy-default.html#key-policy-users-crypto)"},"key_material_base64":{"default":null,"description":"Base64 encoded 256-bit symmetric encryption key material to import. The CMK is permanently associated with this key material. External key only"},"key_owners":{"default":[],"description":"A list of IAM ARNs for those who will have full key permissions (`kms:*`)"},"key_service_users":{"default":[],"description":"A list of IAM ARNs for [key service users](https://docs.aws.amazon.com/kms/latest/developerguide/key-policy-default.html#key-policy-service-integration)"},"key_statements":{"default":{},"description":"A map of IAM policy [statements](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document#statement) for custom permission usage"},"key_symmetric_encryption_users":{"default":[],"description":"A list of IAM ARNs for [key symmetric encryption users](https://docs.aws.amazon.com/kms/latest/developerguide/key-policy-default.html#key-policy-users-crypto)"},"key_usage":{"default":null,"description":"Specifies the intended use of the key. Valid values: `ENCRYPT_DECRYPT` or `SIGN_VERIFY`. Defaults to `ENCRYPT_DECRYPT`"},"key_users":{"default":[],"description":"A list of IAM ARNs for [key users](https://docs.aws.amazon.com/kms/latest/developerguide/key-policy-default.html#key-policy-default-allow-users)"},"multi_region":{"default":false,"description":"Indicates whether the KMS key is a multi-Region (`true`) or regional (`false`) key. Defaults to `false`"},"override_policy_documents":{"default":[],"description":"List of IAM policy documents that are merged together into the exported document. In merging, statements with non-blank `sid`s will override statements with the same `sid`"},"policy":{"default":null,"description":"A valid policy JSON document. Although this is a key policy, not an IAM policy, an `aws_iam_policy_document`, in the form that designates a principal, can be used"},"route53_dnssec_sources":{"default":[],"description":"A list of maps containing `account_ids` and Route53 `hosted_zone_arn` that will be allowed to sign DNSSEC records"},"source_policy_documents":{"default":[],"description":"List of IAM policy documents that are merged together into the exported document. Statements must have unique `sid`s"},"tags":{"default":{},"description":"A map of tags to add to all resources"},"valid_to":{"default":null,"description":"Time at which the imported key material expires. When the key material expires, AWS KMS deletes the key material and the CMK becomes unusable. If not specified, key material does not expire"}}},"version_constraint":"1.3.0"}}}},"relevant_attributes":[{"resource":"module.kms.aws_kms_grant.this","attribute":[]},{"resource":"module.kms.aws_kms_alias.this","attribute":[]},{"resource":"aws_s3_bucket.example","attribute":["id"]},{"resource":"module.kms.aws_kms_external_key.this[0]","attribute":["policy"]},{"resource":"module.kms.aws_kms_external_key.this[0]","attribute":["arn"]},{"resource":"module.kms.aws_kms_key.this[0]","attribute":["key_id"]},{"resource":"module.kms.aws_kms_external_key.this[0]","attribute":["key_usage"]},{"resource":"module.kms.data.aws_iam_policy_document.this[0]","attribute":["json"]},{"resource":"module.kms.aws_kms_key.this[0]","attribute":["policy"]},{"resource":"module.kms.aws_kms_key.this[0]","attribute":["arn"]},{"resource":"module.kms.aws_kms_external_key.this[0]","attribute":["id"]},{"resource":"aws_security_group.ssh","attribute":["id"]},{"resource":"module.kms.aws_kms_external_key.this[0]","attribute":["expiration_model"]},{"resource":"module.kms.aws_kms_external_key.this[0]","attribute":["key_state"]}],"timestamp":"2024-04-21T23:41:31Z","applyable":true,"complete":true,"errored":false}
